# 组件使用指南

## 专利表格组件 (PatentTable)

### 基础用法
```astro
---
import PatentTable from '../components/PatentTable'
import { loadPatents } from '../lib/data/patents'

const patentsData = await loadPatents()
---

<PatentTable patents={patentsData} />
```

### 增强功能
```astro
---
import PatentTable from '../components/PatentTable'
import { loadPatents } from '../lib/data/patents'

const patentsData = await loadPatents()
---

<!-- 启用排序和筛选功能 -->
<PatentTable 
  patents={patentsData}
  enhanced
  sortable
  filterable
/>

<!-- 自定义样式 -->
<PatentTable 
  patents={patentsData}
  className="my-custom-class"
  showHeader={false}
  showFooter={false}
/>
```

### Props 说明
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `patents` | `Patent[]` | 必填 | 专利数据数组 |
| `enhanced` | `boolean` | `false` | 是否启用增强功能（筛选、排序） |
| `sortable` | `boolean` | `false` | 是否启用列排序 |
| `filterable` | `boolean` | `false` | 是否启用类型筛选 |
| `showHeader` | `boolean` | `true` | 是否显示表格头部 |
| `showFooter` | `boolean` | `true` | 是否显示表格底部 |
| `className` | `string` | `''` | 自定义 CSS 类名 |

## 论文卡片组件 (PaperCard)

### 基础用法
```astro
---
import PaperCard from '../components/PaperCard.astro'
import { getCollection } from 'astro:content'

const papers = await getCollection('papers')
---

{papers.map(paper => (
  <PaperCard paper={paper} />
))}
```

### Props 说明
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `paper` | `CollectionEntry<'papers'>` | 必填 | 论文数据 |
| `showAbstract` | `boolean` | `true` | 是否显示摘要 |
| `showLink` | `boolean` | `true` | 是否显示链接 |
| `compact` | `boolean` | `false` | 紧凑模式 |

## 成员卡片组件 (MemberCard)

### 基础用法
```astro
---
import MemberCard from '../components/MemberCard.astro'
import { getCollection } from 'astro:content'

const members = await getCollection('members')
---

{members.map(member => (
  <MemberCard member={member} />
))}
```

### Props 说明
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `member` | `CollectionEntry<'members'>` | 必填 | 成员数据 |
| `showBio` | `boolean` | `true` | 是否显示简介 |
| `showLink` | `boolean` | `true` | 是否显示外部链接 |

## 自适应图片组件 (AdaptiveImage)

### 基础用法
```astro
---
import AdaptiveImage from '../components/AdaptiveImage.astro'
---

<AdaptiveImage 
  src="/images/example.jpg"
  alt="示例图片"
  width={600}
  height={400}
/>
```

### Props 说明
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `src` | `string` | 必填 | 图片路径 |
| `alt` | `string` | 必填 | 替代文本 |
| `width` | `number` | - | 图片宽度 |
| `height` | `number` | - | 图片高度 |
| `className` | `string` | `''` | 自定义 CSS 类名 |
| `lazy` | `boolean` | `true` | 是否启用懒加载 |

## 数据工具函数

### 专利数据
```typescript
import { 
  loadPatents, 
  filterPatentsByType, 
  filterPatentsByStatus,
  filterPatentsByYear,
  sortPatents 
} from '../lib/data/patents'

// 加载所有专利
const patents = await loadPatents()

// 筛选发明专利
const inventionPatents = filterPatentsByType(patents, '发明专利')

// 按日期降序排序
const sortedPatents = sortPatents(patents, 'date-desc')
```

### 新闻数据
```typescript
import { 
  loadNews, 
  getLatestNews, 
  filterNewsByYear,
  formatNewsDate 
} from '../lib/data/news'

// 加载所有新闻
const news = await loadNews()

// 获取最新3条新闻
const latestNews = getLatestNews(news, 3)

// 格式化日期
const formattedDate = formatNewsDate('2023-10-01')
```

### 项目数据
```typescript
import { 
  loadProjects, 
  filterProjectsByStatus 
} from '../lib/data/projects'

// 加载所有项目
const projects = await loadProjects()

// 筛选在研项目
const ongoingProjects = filterProjectsByStatus(projects, '在研')
```

## 工具函数

### 日期格式化
```typescript
import { formatDate, formatNewsDate } from '../lib/utils/format'

// 格式化论文日期
const paperDate = formatDate('2023-10-01') // "2023年10月"

// 格式化新闻日期
const newsDate = formatNewsDate('2023-10-01') // "2023年10月01日"
```

### 文本处理
```typescript
import { generateSlug, truncateText } from '../lib/utils/format'

// 生成URL友好的slug
const slug = generateSlug('示例标题') // "示例标题"

// 截断文本
const truncated = truncateText('很长的一段文本', 10) // "很长的一段文..."
```

## 最佳实践

### 1. 类型安全
- 始终使用 TypeScript 类型定义
- 避免使用 `any` 类型
- 为组件 props 定义明确的接口

### 2. 错误处理
- 使用 try-catch 处理异步操作
- 验证输入数据
- 提供有意义的错误信息

### 3. 性能优化
- 使用懒加载图片
- 按需加载数据
- 避免不必要的重新渲染

### 4. 可访问性
- 为图片提供 alt 文本
- 使用语义化 HTML
- 确保颜色对比度符合标准

### 5. 代码复用
- 提取共享逻辑到工具函数
- 创建可复用的基础组件
- 遵循 DRY 原则