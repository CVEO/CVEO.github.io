---
import AdaptiveImage from './AdaptiveImage.astro'

const { member } = Astro.props
---
{member.data.externalLink ? (
  <a 
    href={member.data.externalLink} 
    target="_blank" 
    rel="noopener noreferrer"
    class="p-6 rounded-xl border border-slate-200 bg-white hover:shadow-lg transition-all duration-300 flex flex-col items-center text-center h-full hover:border-brand-200 hover:bg-brand-50"
  >
    <div class="w-32 h-32 mb-4 overflow-hidden rounded-full border-4 border-white shadow-md">
      <AdaptiveImage 
        src={member.data.photo ? `/${member.data.photo}` : "/assets/avatars/placeholder.svg"} 
        alt={member.data.name}
        aspectRatio="1/1"
        className="w-full h-full"
      />
    </div>
    <h3 class="text-lg font-semibold text-slate-900 mb-1">{member.data.name}</h3>
    <p class="text-slate-600 text-sm mb-2">{member.data.role}</p>
    {member.data.research && (
      <p class="text-slate-500 text-xs line-clamp-2">{member.data.research}</p>
    )}
    <div class="mt-2 text-xs text-brand-900 font-medium flex items-center gap-1">
      <span>查看详情</span>
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
      </svg>
    </div>
  </a>
) : (
  <div class="p-6 rounded-xl border border-slate-200 bg-white hover:shadow-lg transition-all duration-300 flex flex-col items-center text-center h-full">
    <div class="w-32 h-32 mb-4 overflow-hidden rounded-full border-4 border-white shadow-md">
      <AdaptiveImage 
        src={member.data.photo ? `/${member.data.photo}` : "/assets/avatars/placeholder.svg"} 
        alt={member.data.name}
        aspectRatio="1/1"
        className="w-full h-full"
      />
    </div>
    <h3 class="text-lg font-semibold text-slate-900 mb-1">{member.data.name}</h3>
    <p class="text-slate-600 text-sm mb-2">{member.data.role}</p>
    {member.data.research && (
      <p class="text-slate-500 text-xs line-clamp-2">{member.data.research}</p>
    )}
  </div>
)}
